/*!
 * ToggleTVSet - Toggle the visibility of template variables sets by the value of a template variable
 * Version: 1.3.0
 * Build date: 2018-04-24
 */

Ext.onReady(function(){ToggleTVSet.toggleTVSet=function(e,t){var o;Ext.each(e,function(e){(o=Ext.get("tv"+e+"-tr"))&&(t?o.setStyle("display","block"):o.setStyle("display","none"))}),ToggleTVSet.options.debug&&console.log("ToggleTVSet triggered tvs("+e+") set to "+(t?"show":"hide")+".")},ToggleTVSet.toggleTVSets=function(e,t){var o,g;if(t?(o=e.hideTVs,g=e.showTVs):(o=e.store.data.keys.join().split(","),g=e.getValue().split(",")),ToggleTVSet.toggleTVSet(o,0),ToggleTVSet.toggleTVSet(g,1),!t&&ToggleTVSet.options.toggleTVsClearHidden){var l=o.filter(function(e){return-1===g.indexOf(e)});ToggleTVSet.clearTVSet(l)}},ToggleTVSet.clearTVSet=function(e){Ext.each(e,function(e){var t=ToggleTVSet.options.resourceForm.findField("tv"+e);t&&t.setValue("")})},ToggleTVSet.options.debug&&Ext.util.Observable.capture(Ext.getCmp("modx-panel-resource"),function(e){console.log(e,arguments)}),ToggleTVSet.options.resourcePanel=Ext.getCmp("modx-panel-resource"),ToggleTVSet.options.resourceForm=ToggleTVSet.options.resourcePanel.getForm(),ToggleTVSet.options.initialized=!1,ToggleTVSet.options.resourcePanel.on("afterlayout",function(){ToggleTVSet.options.initialized||Ext.each(ToggleTVSet.options.toggleTVs,function(e){ToggleTVSet.toggleTVSets(ToggleTVSet.options,!0);var t=ToggleTVSet.options.resourceForm.findField("tv"+e);t&&t.on("select",function(){ToggleTVSet.toggleTVSets(this,!1)})}),ToggleTVSet.options.initialized=!0})});