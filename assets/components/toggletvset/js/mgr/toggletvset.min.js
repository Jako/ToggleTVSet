/*!
 * ToggleTVSet - Toggle the visibility of template variables sets by the value of a template variable
 * Version: 2.0.0
 * Build date: 2022-01-18
 */
var toggletvset=function(t){toggletvset.superclass.constructor.call(this,t=t||{})};Ext.extend(toggletvset,Ext.Component,{page:{},window:{},grid:{},tree:{},panel:{},combo:{},config:{},util:{},jquery:{},form:{}}),Ext.reg("toggletvsettv",toggletvset);var ToggleTVSet=new toggletvset;ToggleTVSet.panel.InputOptions=function(t){this.options=(t=t||{}).options,this.params=t.params,Ext.applyIf(t,{layout:"form",autoHeight:!0,cls:"form-with-labels",labelAlign:"top",border:!1,items:[{cls:"treehillstudio_about",html:'<img width="146" height="40" src="'+ToggleTVSet.config.assetsUrl+'img/treehill-studio-small.png" srcset="'+ToggleTVSet.config.assetsUrl+'img/treehill-studio-small@2x.png 2x" alt="Treehill Studio">',listeners:{afterrender:function(){this.getEl().select("img").on("click",function(){var t='<span style="display: inline-block; text-align: center;">&copy; 2015 by Patrick Percy Blank <a href="https://github.com/pepebe" target="_blank">github.com/pepebe</a><br><img src="'+ToggleTVSet.config.assetsUrl+'img/treehill-studio.png" srcset="'+ToggleTVSet.config.assetsUrl+'img/treehill-studio@2x.png 2x" alt="Treehill Studio" style="margin-top: 10px"><br>&copy; 2015-2022 by <a href="https://treehillstudio.com" target="_blank">treehillstudio.com</a></span>';Ext.Msg.show({title:_("toggletvset.package")+" "+ToggleTVSet.config.version,msg:t,buttons:Ext.Msg.OK,cls:"treehillstudio_window",width:358})})}}}]}),ToggleTVSet.panel.InputOptions.superclass.constructor.call(this,t)},Ext.extend(ToggleTVSet.panel.InputOptions,MODx.Panel),Ext.reg("toggletvset-panel-inputoptions",ToggleTVSet.panel.InputOptions),ToggleTVSet.combo.ToggleTVSet=function(t){this.options=(t=t||{}).options,this.params=t.params,this.tvid=this.options.tvid,Ext.applyIf(t,{allowBlank:this.options.allowBlank,anchor:"100%",ctCls:"toggletvset-tv",displayField:"title",fieldLabel:this.options.fieldLabel,hiddenName:"tv"+this.tvid,minChars:2,mode:"remote",msgTarget:"title",name:"tv"+this.tvid,pageSize:this.options.pageSize,queryDelay:0,store:this.options.store,tpl:'<tpl for="."><div class="x-combo-list-item">'+this.options.fieldTpl+"</div></tpl>",transform:"toggletvset-tv-"+this.tvid,triggerAction:"all",value:this.options.value,valueField:"id",width:400}),ToggleTVSet.combo.ToggleTVSet.superclass.constructor.call(this,t)},ToggleTVSet.combo.ToggleTVSet=Ext.extend(ToggleTVSet.combo.ToggleTVSet,Ext.form.ComboBox),Ext.reg("toggletvset-combo-toggletvsetv-single",ToggleTVSet.combo.ToggleTVSet),ToggleTVSet.util={toggleTVSet:function(t,e){Ext.each(t,function(t){t=Ext.get("tv"+t+"-tr");t&&(e?t.setStyle("display","block"):t.setStyle("display","none"))}),ToggleTVSet.config.debug&&console.log("ToggleTVSet triggered tvs("+t+") set to "+(e?"show":"hide")+".")},toggleTVSets:function(t,e){var o,l=e?(o=t.hideTVs,t.showTVs):(o=t.store.data.keys.join().split(","),t.getValue().split(","));ToggleTVSet.util.toggleTVSet(o,0),ToggleTVSet.util.toggleTVSet(l,1),!e&&ToggleTVSet.config.toggleTVsClearHidden&&(o=o.filter(function(t){return-1===l.indexOf(t)}),ToggleTVSet.util.clearTVSet(o))},clearTVSet:function(t){Ext.each(t,function(t){t=ToggleTVSet.form.Resource.findField("tv"+t);t&&t.setValue("")})},init:function(){ToggleTVSet.config.debug&&Ext.util.Observable.capture(Ext.getCmp("modx-panel-resource"),function(t){}),ToggleTVSet.panel.Resource=Ext.getCmp("modx-panel-resource"),ToggleTVSet.form.Resource=ToggleTVSet.panel.Resource.getForm(),ToggleTVSet.config.initialized=!1,ToggleTVSet.panel.Resource.on("afterlayout",function(){ToggleTVSet.config.initialized||(ToggleTVSet.util.toggleTVSets(ToggleTVSet.config,!0),Ext.each(ToggleTVSet.config.toggleTVs,function(t){t=ToggleTVSet.form.Resource.findField("tv"+t);t&&t.on("select",function(){ToggleTVSet.util.toggleTVSets(this,!1)})})),ToggleTVSet.config.initialized=!0})}};